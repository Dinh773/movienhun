<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>Movienhun</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body class="p-3 mb-2 bg-dark-subtle text-dark-emphasis">
    <div class="container my-4">
        <h1>Movienhun</h1>
        <blockquote class="blockquote text-light p-4 bg-dark border-start border-4 border-primary rounded">
        <p class="mb-0">
            Welcome to Movienhun â€“ our personal movie companion. This app allows us to record, rate, and reflect on every film we watch.
        </p>
        <footer class="blockquote-footer text-light mt-2">Phuoc & Nhung</footer>
        </blockquote>
        <div class="card mb-4 bg-dark text-light p-3">
            <h4 class="card-title">Add a Movie</h4>
            <div class="card-body">

                <form action="/" method="post">
                    <div class="mb-3">
                        <label for="title" class="form-label">Movie Title</label>
                        <input class="form-control" type="text" name="title" id="title" placeholder="Name ?" required>
                    </div>

                    <div class="mb-3">
                        <label for="rating" class="form-label">Rating (?/100)</label>
                        <input class="form-control" type="number" name="rating" id="rating" placeholder="Rating ?" min="0" max="100" step="1" required>
                    </div>

                    <div class="mb-3">
                        <label for="comment" class="form-label">Your comments on the movie ?</label>
                        <textarea class="form-control" name="comment" id="comment" placeholder="Comment ?" rows="3" required></textarea>
                    </div>
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">Add</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="card mb-4 bg-dark text-light p-3" >
            <h4 class="card-title">Movie Table</h4>
            <div class="card-body">

                <table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th scope="col" style="width:10%;">Ranking</th>
                            <th scope="col" style="width:20%;">Movie</th>
                            <th scope="col" style="width:10%;">Rating</th>
                            <th scope="col" style="width:50%;">Comment</th>
                            <th scope="col" style="width:10%;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <th:block th:each="movie, i: ${movies}">
                            <tr>
                                <th th:text="${i.index+1}">1</th>
                                <td th:text="${movie.title}"></td>
                                <td th:text="${movie.rating}"></td>
                                <td class="text-break" th:text="${movie.comment}"></td>
                                <td>
                                    <button class="btn btn-outline-warning btn-sm" th:onclick="'document.getElementById(\'edit-form-' + ${movie.id} + '\').style.display=\'table-row\''">Edit</button>
                                </td>
                                <td>
                                    <a th:href="@{/{id}/delete(id=${movie.id})}" class="btn btn-outline-danger btn-sm">Delete</a>
                                </td>
                            </tr>
                            <tr th:id="'edit-form-' + ${movie.id}" style="display:none;">
                                <td colspan="5">
                                    <form th:action="@{'/' + ${movie.id} + '/edit'}" method="post" class="d-flex gap-2">
                                        <input type="text" name="title" th:value="${movie.title}" class="form-control form-control-sm" placeholder="Title" required/>
                                        <input type="number" name="rating" th:value="${movie.rating}" class="form-control form-control-sm" placeholder="Rating" min="0" max="100" step="1" required/>
                                        <input type="text" name="comment" th:value="${movie.comment}" class="form-control form-control-sm" placeholder="Comment" required/>
                                        <button type="submit" class="btn btn-outline-success btn-sm">Save</button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm"
                                                th:onclick="'document.getElementById(\'edit-form-' + ${movie.id} + '\').style.display=\'none\''">
                                            Cancel
                                        </button>
                                    </form>
                                </td>
                            </tr>

                        </th:block>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>